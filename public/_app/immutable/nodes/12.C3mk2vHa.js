import"../chunks/CWj6FrbW.js";import{i as Y}from"../chunks/CCVlYhmH.js";import{c as A,f as D,a as c,p as G,b as g,t as q,g as r,l as H,d as J,e as d,s as p,h as a,m as f,n as b,r as l,i as K}from"../chunks/DywqVBIy.js";import{i as C}from"../chunks/ASrwIIbz.js";import{r as I,a as O}from"../chunks/y8QnOz8S.js";import{b as j}from"../chunks/BUqQ10_7.js";import{b as Q,r as S}from"../chunks/T6-usF2s.js";import{p as W}from"../chunks/CWmzcjye.js";import{s as X}from"../chunks/BHeDoN2z.js";import{g as Z}from"../chunks/DfZmdmjZ.js";import{I as ee,s as re}from"../chunks/B2UO5zuC.js";import{l as te,s as se}from"../chunks/Y82m_CnN.js";import{L as ae}from"../chunks/CsbSaeic.js";function B(v,u){const m=te(u,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}]];ee(v,se({name:"lock"},()=>m,{get iconNode(){return o},children:(n,i)=>{var t=A(),w=D(t);re(w,u,"default",{}),c(n,t)},$$slots:{default:!0}}))}var oe=g("<div> </div>"),de=g("<!> <span>Updating...</span>",1),le=g("<span>Update Password</span>"),ie=g('<div class="max-w-md mx-auto mt-16 p-6 bg-white rounded-lg shadow-md"><h1 class="text-2xl font-bold text-purple-900 mb-6">Update Your Password</h1> <p class="text-gray-600 mb-6">Please enter your new password below.</p> <form class="space-y-4"><div><label for="password" class="block text-sm font-medium text-gray-700 flex items-center gap-2"><!> New Password</label> <input type="password" id="password" required minlength="6" class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-purple-500 focus:ring-purple-500 disabled:bg-gray-50 disabled:cursor-not-allowed" placeholder="Enter your new password"/></div> <div><label for="confirm-password" class="block text-sm font-medium text-gray-700 flex items-center gap-2"><!> Confirm New Password</label> <input type="password" id="confirm-password" required minlength="6" class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-purple-500 focus:ring-purple-500 disabled:bg-gray-50 disabled:cursor-not-allowed" placeholder="Confirm your new password"/></div> <!> <button type="submit" class="w-full bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 flex items-center justify-center gap-2"><!></button> <div class="text-center mt-4"><a href="/auth/login" class="text-purple-600 hover:text-purple-500">Back to Login</a></div></form></div>');function _e(v,u){G(u,!1);const m=async({parent:e})=>{const{session:s}=await e();if(!s)throw S(303,"/auth/login");return{}};let o=f(""),n=f(""),i=f(!1),t=f({text:"",type:""});async function w(){if(r(o)!==r(n)){a(t,{text:"Passwords do not match",type:"error"});return}if(r(o).length<6){a(t,{text:"Password must be at least 6 characters long",type:"error"});return}try{a(i,!0),a(t,{text:"",type:""});const{error:e}=await X.auth.updateUser({password:r(o)});if(e)throw e;a(t,{text:"Password updated successfully! Redirecting...",type:"success"}),a(o,""),a(n,""),setTimeout(()=>{Z("/dashboard")},2e3)}catch(e){a(t,{text:e.message||"Failed to update password",type:"error"})}finally{a(i,!1)}}Y();var x=ie(),y=p(d(x),4),h=d(y),_=d(h),E=d(_);B(E,{size:20}),b(),l(_);var P=p(_,2);I(P),l(h);var k=p(h,2),$=d(k),F=d($);B(F,{size:20}),b(),l($);var U=p($,2);I(U),l(k);var N=p(k,2);{var M=e=>{var s=oe(),L=d(s,!0);l(s),q(()=>{O(s,1,`p-4 rounded-md ${r(t).type==="error"?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`),K(L,r(t).text)}),c(e,s)};C(N,e=>{r(t).text&&e(M)})}var z=p(N,2),R=d(z);{var T=e=>{var s=de(),L=D(s);ae(L,{class:"animate-spin",size:20}),b(2),c(e,s)},V=e=>{var s=le();c(e,s)};C(R,e=>{r(i)?e(T):e(V,!1)})}return l(z),b(2),l(y),l(x),q(()=>{P.disabled=r(i),U.disabled=r(i),z.disabled=r(i)}),j(P,()=>r(o),e=>a(o,e)),j(U,()=>r(n),e=>a(n,e)),H("submit",y,W(w)),c(v,x),Q(u,"load",m),J({load:m})}export{_e as component};
