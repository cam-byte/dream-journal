import"../chunks/CWj6FrbW.js";import{i as fe}from"../chunks/CCVlYhmH.js";import{o as Ae}from"../chunks/CxfMjxZB.js";import{c as E,f as M,a as n,p as ue,d as ge,b as h,e as a,n as O,r as e,s as d,g as t,m as I,t as q,l as oe,h as $,i as C,o as qe}from"../chunks/DywqVBIy.js";import{i as D}from"../chunks/ASrwIIbz.js";import{s as Ee,e as Le,i as Te}from"../chunks/y8QnOz8S.js";import{l as J,s as K,p as se,a as Pe,b as He}from"../chunks/Y82m_CnN.js";import{A as Oe,p as Se}from"../chunks/6dHHWXQ-.js";import{s as ie}from"../chunks/BHeDoN2z.js";import"../chunks/C_x8RpkU.js";import{g as Ve}from"../chunks/JbcUVXmK.js";import{I as Q,s as R}from"../chunks/B2UO5zuC.js";import{L as _e}from"../chunks/CsbSaeic.js";import{C as je}from"../chunks/CYZG1vBQ.js";import{M as Be}from"../chunks/FLBswei7.js";function Fe(u,o){const c=J(o,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"}]];Q(u,K({name:"square-pen"},()=>c,{get iconNode(){return g},children:(f,r)=>{var s=E(),p=M(s);R(p,o,"default",{}),n(f,s)},$$slots:{default:!0}}))}function Ge(u,o){const c=J(o,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor"}]];Q(u,K({name:"tag"},()=>c,{get iconNode(){return g},children:(f,r)=>{var s=E(),p=M(s);R(p,o,"default",{}),n(f,s)},$$slots:{default:!0}}))}function Je(u,o){const c=J(o,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]];Q(u,K({name:"trash-2"},()=>c,{get iconNode(){return g},children:(f,r)=>{var s=E(),p=M(s);R(p,o,"default",{}),n(f,s)},$$slots:{default:!0}}))}function Ke(u,o){const c=J(o,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]];Q(u,K({name:"triangle-alert"},()=>c,{get iconNode(){return g},children:(f,r)=>{var s=E(),p=M(s);R(p,o,"default",{}),n(f,s)},$$slots:{default:!0}}))}var Qe=h('<div class="text-red-500 text-sm mb-4"> </div>'),Re=h("<!> Deleting...",1),Ue=h('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-lg max-w-md w-full p-6"><div class="flex items-center gap-3 text-red-600 mb-4"><!> <h2 class="text-xl font-semibold">Delete Dream</h2></div> <p class="text-gray-600 mb-6">Are you sure you want to delete this dream? This action cannot be undone.</p> <!> <div class="flex gap-3"><button class="flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50"><!></button> <button class="flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2">Cancel</button></div></div></div>');function We(u,o){ue(o,!1);let c=se(o,"dreamId",8),g=se(o,"isOpen",8),f=se(o,"onClose",8),r=I(!1),s=I("");console.log("Modal mounted with dreamId:",c());async function p(){$(r,!0),$(s,"");try{const{data:_,error:b}=await ie.from("dreams").select("id").eq("id",c()).single();if(b)throw b;if(!_)throw new Error("Dream not found");const{error:w}=await ie.from("dreams").delete().eq("id",c());if(w)throw w;f()(),Ve("/dreams",{replaceState:!0})}catch(_){$(s,_.message),console.error("Delete error:",_)}finally{$(r,!1)}}fe();var k=E(),L=M(k);{var U=_=>{var b=Ue(),w=a(b),T=a(w),W=a(T);Ke(W,{size:24}),O(2),e(T);var S=d(T,4);{var X=v=>{var i=Qe(),y=a(i,!0);e(i),q(()=>C(y,t(s))),n(v,i)};D(S,v=>{t(s)&&v(X)})}var V=d(S,2),N=a(V),l=a(N);{var x=v=>{var i=Re(),y=M(i);_e(y,{class:"inline animate-spin mr-2",size:16}),O(),n(v,i)},P=v=>{var i=qe("Delete Dream");n(v,i)};D(l,v=>{t(r)?v(x):v(P,!1)})}e(N);var j=d(N,2);e(V),e(w),e(b),q(()=>{N.disabled=t(r),j.disabled=t(r)}),oe("click",N,p),oe("click",j,function(...v){var i;(i=f())==null||i.apply(this,v)}),n(_,b)};D(L,_=>{g()&&_(U)})}n(u,k),ge()}var Xe=h('<div class="text-center py-12"><!> <p class="text-gray-600">Loading dream...</p></div>'),Ye=h('<div class="text-center py-12"><p class="text-red-500"> </p></div>'),Ze=h('<span class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm">Lucid Dream</span>'),ea=h('<div class="mb-4"><span class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm capitalize"> </span></div>'),aa=h('<span class="px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm"> </span>'),ta=h('<div class="flex items-start gap-2 mt-6 pt-6 border-t border-gray-100"><!> <div class="flex flex-wrap gap-2"></div></div>'),ra=h('<article class="bg-white rounded-lg shadow-md overflow-hidden"><div class="p-8"><div class="flex items-center justify-between mb-6"><div class="flex items-center gap-2 text-gray-500"><!> <span> </span></div> <div class="flex items-center gap-4"><!> <div class="flex items-center gap-2"><a class="p-2 text-gray-600 hover:text-purple-600 transition-colors"><!></a> <button class="p-2 text-gray-600 hover:text-red-600 transition-colors"><!></button></div></div></div> <h1 class="text-3xl font-bold text-purple-900 mb-4"> </h1> <!> <p class="text-gray-600 leading-relaxed mb-6 whitespace-pre-line"> </p> <!></div></article> <div class="mt-8 p-8 bg-white rounded-lg shadow-md text-center"><!> <h2 class="text-xl font-semibold text-gray-600 mb-2">Dream Visualization</h2> <p class="text-gray-500">AI-generated visualization coming soon...</p></div>',1),sa=h('<div class="max-w-4xl mx-auto px-4 py-8"><a href="/dreams" class="inline-flex items-center text-purple-600 hover:text-purple-700 mb-6"><!> Back to Dreams</a> <!></div> <!>',1);function ba(u,o){ue(o,!1);const[c,g]=Pe(),f=()=>He(Se,"$page",c);let r=I(null),s=I(!0),p=I(""),k=I(!1),L=I(null);async function U(){try{const{data:l,error:x}=await ie.from("dreams").select("*").eq("id",f().params.id).single();if(x)throw x;if(!l)throw new Error("Dream not found");$(r,l),$(L,t(r).id)}catch(l){$(p,l.message)}finally{$(s,!1)}}Ae(()=>{U()}),fe();var _=sa(),b=M(_),w=a(b),T=a(w);Oe(T,{size:20,class:"mr-2"}),O(),e(w);var W=d(w,2);{var S=l=>{var x=Xe(),P=a(x);_e(P,{class:"mx-auto text-purple-600 animate-spin mb-4",size:48}),O(2),e(x),n(l,x)},X=l=>{var x=E(),P=M(x);{var j=i=>{var y=Ye(),A=a(y),B=a(A,!0);e(A),e(y),q(()=>C(B,t(p))),n(i,y)},v=i=>{var y=ra(),A=M(y),B=a(A),Y=a(B),Z=a(Y),ne=a(Z);je(ne,{size:20});var le=d(ne,2),xe=a(le,!0);e(le),e(Z);var de=d(Z,2),ve=a(de);{var he=m=>{var z=Ze();n(m,z)};D(ve,m=>{t(r).is_lucid&&m(he)})}var ce=d(ve,2),F=a(ce),be=a(F);Fe(be,{size:20}),e(F);var ee=d(F,2),ye=a(ee);Je(ye,{size:20}),e(ee),e(ce),e(de),e(Y);var ae=d(Y,2),$e=a(ae,!0);e(ae);var pe=d(ae,2);{var we=m=>{var z=ea(),H=a(z),G=a(H,!0);e(H),e(z),q(()=>C(G,t(r).mood)),n(m,z)};D(pe,m=>{t(r).mood&&m(we)})}var te=d(pe,2),ze=a(te,!0);e(te);var De=d(te,2);{var Me=m=>{var z=ta(),H=a(z);Ge(H,{size:20,class:"text-gray-400 mt-1"});var G=d(H,2);Le(G,5,()=>t(r).tags,Te,(Ce,Ie)=>{var re=aa(),ke=a(re,!0);e(re),q(()=>C(ke,t(Ie))),n(Ce,re)}),e(G),e(z),n(m,z)};D(De,m=>{t(r).tags&&t(r).tags.length>0&&m(Me)})}e(B),e(A);var me=d(A,2),Ne=a(me);Be(Ne,{class:"mx-auto text-purple-300 mb-4",size:48}),O(4),e(me),q(m=>{C(xe,m),Ee(F,"href",`/dreams/${t(r).id??""}/edit`),C($e,t(r).title),C(ze,t(r).description)},[()=>new Date(t(r).created_at).toLocaleDateString()]),oe("click",ee,()=>$(k,!0)),n(i,y)};D(P,i=>{t(p)?i(j):i(v,!1)},!0)}n(l,x)};D(W,l=>{t(s)?l(S):l(X,!1)})}e(b);var V=d(b,2);{var N=l=>{We(l,{get dreamId(){return t(L)},isOpen:!0,onClose:()=>$(k,!1)})};D(V,l=>{t(L)&&t(k)&&l(N)})}n(u,_),ge(),g()}export{ba as component};
