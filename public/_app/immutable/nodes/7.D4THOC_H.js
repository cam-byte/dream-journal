import"../chunks/CWj6FrbW.js";import{i as Q}from"../chunks/CCVlYhmH.js";import{p as V,b as R,t as E,e as t,g as r,l as W,a as G,d as X,s as a,h as s,m as l,r as o,j as Y,k as Z,n as O,i as J}from"../chunks/DywqVBIy.js";import{e as $,b as ee,r as C,i as re}from"../chunks/y8QnOz8S.js";import{b as T,a as te}from"../chunks/BUqQ10_7.js";import{p as ae}from"../chunks/CWmzcjye.js";import{g as oe}from"../chunks/DfZmdmjZ.js";import{s as P}from"../chunks/BHeDoN2z.js";var se=R("<option> </option>"),ie=R('<div class="max-w-2xl mx-auto mt-8 p-6 bg-white rounded-lg shadow-md"><h1 class="text-2xl font-bold text-purple-900 mb-6">Record New Dream</h1> <form class="space-y-6"><div><label for="title" class="block text-sm font-medium text-gray-700">Dream Title</label> <input type="text" id="title" required class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-purple-500 focus:ring-purple-500" placeholder="Give your dream a memorable title"/></div> <div><label for="description" class="block text-sm font-medium text-gray-700">Description</label> <textarea id="description" required rows="4" class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-purple-500 focus:ring-purple-500" placeholder="Describe your dream in detail..."></textarea></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label for="mood" class="block text-sm font-medium text-gray-700">Mood</label> <select id="mood" class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-purple-500 focus:ring-purple-500"><option>Select mood...</option><!></select></div> <div><label for="tags" class="block text-sm font-medium text-gray-700">Tags</label> <input type="text" id="tags" class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-purple-500 focus:ring-purple-500" placeholder="flying, water, chase (comma separated)"/></div></div> <div class="flex items-center"><input type="checkbox" id="isLucid" class="h-4 w-4 text-purple-600 rounded focus:ring-purple-500"/> <label for="isLucid" class="ml-2 block text-sm text-gray-700">This was a lucid dream (I knew I was dreaming)</label></div> <button type="submit" class="w-full bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50"> </button></form></div>');function ve(U,z){V(z,!1);let f=l(""),v=l(""),u=l(""),b=l(!1),p=l(""),n=l(!1);const B=["Peaceful","Anxious","Exciting","Mysterious","Scary","Joyful","Confusing"];async function F(){s(n,!0);try{const{data:{user:e},error:d}=await P.auth.getUser();if(d)throw d;if(!e)throw new Error("No user logged in");const{data:i,error:c}=await P.from("dreams").insert([{user_id:e.id,title:r(f),description:r(v),mood:r(u).toLowerCase(),is_lucid:r(b),tags:r(p)?r(p).split(",").map(m=>m.trim()):[]}]).select().single();if(c)throw c;oe("/dreams")}catch(e){e.message}finally{s(n,!1)}}Q();var g=ie(),x=a(t(g),2),_=t(x),q=a(t(_),2);C(q),o(_);var y=a(_,2),I=a(t(y),2);Y(I),o(y);var h=a(y,2),w=t(h),k=a(t(w),2);E(()=>{r(u),Z(()=>{})});var D=t(k);D.value=D.__value="";var H=a(D);$(H,1,()=>B,re,(e,d)=>{var i=se(),c=t(i,!0);o(i);var m={};E(A=>{J(c,r(d)),m!==(m=A)&&(i.value=(i.__value=A)??"")},[()=>r(d).toLowerCase()]),G(e,i)}),o(k),o(w);var M=a(w,2),N=a(t(M),2);C(N),o(M),o(h);var L=a(h,2),j=t(L);C(j),O(2),o(L);var S=a(L,2),K=t(S,!0);o(S),o(x),o(g),E(()=>{S.disabled=r(n),J(K,r(n)?"Saving dream...":"Save Dream")}),T(q,()=>r(f),e=>s(f,e)),T(I,()=>r(v),e=>s(v,e)),ee(k,()=>r(u),e=>s(u,e)),T(N,()=>r(p),e=>s(p,e)),te(j,()=>r(b),e=>s(b,e)),W("submit",x,ae(F)),G(U,g),X()}export{ve as component};
